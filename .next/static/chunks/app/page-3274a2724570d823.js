(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7775:function(e,t,i){Promise.resolve().then(i.bind(i,9787))},9787:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return J}});var n=i(3827),o=i(4090),a=i(8745),r=i(9227),s=i(446),l=i.n(s),c=i(4522);function d(e){let{videos:t}=e,[i,s]=(0,o.useState)(0);(0,o.useEffect)(()=>{s(0)},[t]);let d=(0,c.QS)({onSwipedLeft:()=>s(e=>(e+1)%t.length),onSwipedRight:()=>s(e=>(e-1+t.length)%t.length),preventScrollOnSwipe:!0,trackMouse:!0});return(0,n.jsxs)("div",{...d,style:{position:"relative",overflow:"hidden",marginBottom:"16px"},children:[(0,n.jsx)("div",{style:{position:"relative",paddingTop:"56.25%",backgroundColor:"#000"},children:(0,n.jsx)(a.M,{children:t.map((e,t)=>t===i&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,n.jsx)(l(),{url:e.url,playing:!0,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}})},t))})}),(0,n.jsx)("div",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"4px 8px",borderRadius:"8px",fontSize:"14px"},children:t[i].name}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0"},children:t.map((e,t)=>(0,n.jsx)("div",{style:{width:t===i?"12px":"8px",height:t===i?"12px":"8px",borderRadius:"50%",backgroundColor:t===i?"#667eea":"#ccc",margin:"0 5px",transition:"all 0.3s ease"}},t))})]})}let h=[{title:"Spontaneous Nystagmus",abnormalFindings:"Central signs: Vertical or torsional nystagmus. Peripheral signs: Horizontal nystagmus (within 48-72h).",videos:[{name:"Vertical",url:"https://www.youtube.com/watch?v=_KtMS7hx5c4"},{name:"Torsional",url:"https://www.youtube.com/watch?v=i3N7Zhm42G0"},{name:"Horizontal",url:"https://www.youtube.com/watch?v=THhcZhobVYs"}]},{title:"Gaze-Evoked Nystagmus",abnormalFindings:"Central signs: Direction changes with gaze direction. Peripheral signs: Direction-fixed, beats toward unaffected ear.",videos:[{name:"Direction-Changing (Central)",url:"https://www.youtube.com/watch?v=Dlwu6CpuHY4"},{name:"Direction-Fixed (Peripheral)",url:"https://www.youtube.com/watch?v=FEVNoEW38CI"}]},{title:"Saccadic Eye Movements",abnormalFindings:"Hypermetric (overshoot) or hypometric (undershoot) saccades suggest central signs.",videos:[{name:"Saccade Testing",url:"https://www.youtube.com/watch?v=D_y56PQvZZA"}]},{title:"VOR Cancellation",abnormalFindings:"Inability to suppress VOR suggests central signs.",videos:[{name:"VOR Cancellation Test",url:"https://www.youtube.com/watch?v=7Nw3TgieAjI"}]},{title:"Head Impulse Test (HIT)",abnormalFindings:"Catch-up saccade when turning toward affected ear indicates peripheral signs.",videos:[{name:"HIT Technique",url:"https://www.youtube.com/watch?v=rr-MFxDcwWs"}]},{title:"Test of Skew Deviation",abnormalFindings:"Vertical realignment when covering/uncovering either eye suggests central signs (brainstem).",videos:[{name:"Alternate Cover Test",url:"https://www.youtube.com/watch?v=zgqCXef-qPs"}]}];function p(){let[e,t]=(0,o.useState)(0),i=h[e],a={padding:"12px 24px",fontSize:"16px",fontWeight:"bold",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#667eea",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},r={...a,backgroundColor:"#d1d5db",cursor:"not-allowed",boxShadow:"none"};return(0,n.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#f4f4f9"},children:[(0,n.jsx)("div",{style:{padding:"20px 20px 0 20px"},children:(0,n.jsx)("h2",{style:{textAlign:"center",color:"#333",marginBottom:"20px"},children:"Test ".concat(e+1,": ").concat(i.title)})}),(0,n.jsx)(d,{videos:i.videos},e),(0,n.jsxs)("div",{style:{padding:"16px 20px",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",margin:"20px",flexGrow:1},children:[(0,n.jsx)("h3",{style:{color:"#d9534f",marginBottom:"10px",fontSize:"16px"},children:"Abnormal Findings:"}),(0,n.jsx)("p",{style:{color:"#555",lineHeight:1.6,fontSize:"14px"},children:i.abnormalFindings})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 20px 20px"},children:[(0,n.jsx)("button",{onClick:()=>{t(e=>Math.max(0,e-1))},disabled:0===e,style:0===e?r:a,children:"← Previous Test"}),(0,n.jsxs)("span",{style:{color:"#555",fontWeight:"600"},children:[e+1," / ",h.length]}),(0,n.jsx)("button",{onClick:()=>{t(e=>Math.min(e+1,h.length-1))},disabled:e===h.length-1,style:e===h.length-1?r:a,children:"Next Test →"})]})]})}function u(e){let{tabs:t,activeTab:i,setActiveTab:o}=e,a={background:"none",border:"none",color:"#888",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",flex:1,height:"100%",transition:"color 0.2s ease-in-out",fontSize:"12px"},r={...a,color:"#2D3748",fontWeight:"600"},s={marginBottom:"4px",height:"28px",width:"28px",display:"flex",alignItems:"center",justifyContent:"center"};return(0,n.jsx)("nav",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",backgroundColor:"#ffffff",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",position:"fixed",bottom:0,width:"100%",height:"70px",zIndex:1e3},children:t.map(e=>(0,n.jsxs)("button",{style:i===e.id?r:a,onClick:()=>o(e.id),children:[(0,n.jsx)("div",{style:s,children:e.icon}),e.label]},e.id))})}function g(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),(0,n.jsx)("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),(0,n.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),(0,n.jsx)("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]})}function x(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}function m(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M12 2a7 7 0 0 0-7 7c0 2.03 1.04 4.3 3 5.5v2.5a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2.5c1.96-1.2 3-3.47 3-5.5a7 7 0 0 0-7-7z"}),(0,n.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),(0,n.jsx)("line",{x1:"9",y1:"16",x2:"15",y2:"16"})]})}function y(e){let{className:t}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:(0,n.jsx)("path",{d:"M18,2H6A2,2,0,0,0,4,4V20a2,2,0,0,0,2,2H18a2,2,0,0,0,2-2V4A2,2,0,0,0,18,2ZM15,13H13v2a1,1,0,0,1-2,0V13H9a1,1,0,0,1,0-2h2V9a1,1,0,0,1,2,0v2h2a1,1,0,0,1,0,2Z"})})}function f(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:[(0,n.jsx)("rect",{x:"3",y:"8",width:"18",height:"8",rx:"4",ry:"4",fill:"currentColor",opacity:"0.8"}),(0,n.jsx)("rect",{x:"8",y:"3",width:"8",height:"18",rx:"4",ry:"4",fill:"currentColor",opacity:"0.6"}),(0,n.jsx)("circle",{cx:"7",cy:"12",r:"1",fill:"white"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"white"}),(0,n.jsx)("circle",{cx:"17",cy:"12",r:"1",fill:"white"}),(0,n.jsx)("circle",{cx:"12",cy:"7",r:"1",fill:"white"}),(0,n.jsx)("circle",{cx:"12",cy:"17",r:"1",fill:"white"})]})}function b(e){let{onClose:t}=e,i=(0,o.useRef)(null),a=(0,o.useRef)(),[r,s]=(0,o.useState)([]),[l,c]=(0,o.useState)({beta:0,gamma:0}),[d,h]=(0,o.useState)(!1),[p,u]=(0,o.useState)(!1),g=(0,o.useRef)([]),x=Math.floor(5),m=Math.PI/3,y=200+190*Math.cos(m),f=200+190*Math.sin(m),b=(0,o.useCallback)(()=>{let e=[],t=Math.PI/2+Math.PI/6;for(let i=0;i<4;i++){let n=t+(i-1.5)*.05;e.push({id:i,x:200+120*Math.cos(n),y:200+120*Math.sin(n),vx:0,vy:0,radius:x,inAmpulla:!1,dissolving:!1,originalRadius:x})}s(e),g.current=e,u(!1)},[]),v=async()=>{if("undefined"!=typeof DeviceOrientationEvent&&"requestPermission"in DeviceOrientationEvent)try{let e=await DeviceOrientationEvent.requestPermission();"granted"===e&&h(!0)}catch(e){console.error("Error requesting orientation permission:",e)}else h(!0)};(0,o.useEffect)(()=>{if(!d)return;let e=e=>{c({beta:e.beta||0,gamma:e.gamma||0})};return window.addEventListener("deviceorientation",e),()=>window.removeEventListener("deviceorientation",e)},[d]);let w=(e,t)=>{let i=Math.sqrt((e-200)**2+(t-200)**2);return i>=100&&i<=140},j=(e,t,i)=>e-i<214&&e+i>186&&t-i<347&&t+i>309,C=(e,t)=>{if(70>=Math.sqrt((e-y)**2+(t-f)**2))return!0;let i=e-(200+140*Math.cos(m)),n=t-(200+140*Math.sin(m)),o=i*Math.cos(-m)-n*Math.sin(-m),a=i*Math.sin(-m)+n*Math.cos(-m);return 25>=Math.abs(o)&&20>=Math.abs(a)},S=(e,t)=>w(e,t)||C(e,t),k=(0,o.useCallback)(()=>{if(!i.current)return;let e=g.current.map((e,t)=>{let i,n;if(e.dissolving){let t=Math.max(0,e.radius-.02);return{...e,radius:t}}30>Math.abs(Math.abs(l.gamma||0)-90)?(i=.08*Math.sin((l.gamma||0)*Math.PI/180),n=.008*Math.sin((l.beta||0)*Math.PI/180)):(i=.08*Math.sin((l.gamma||0)*Math.PI/180),n=.08*Math.sin((l.beta||0)*Math.PI/180));let o=e.vx+i,a=e.vy+n;o*=.98,a*=.98;let r=e.x+o,s=e.y+a,c=C(r,s);c&&!e.inAmpulla&&(e.inAmpulla=!0);let d=Math.sqrt((r-200)**2+(s-200)**2);if(w(r,s)){if(d>140-e.radius){let t=m-.4,i=m+.4,n=Math.atan2(s-200,r-200);n<0&&(n+=2*Math.PI);let l=t;l<0&&(l+=2*Math.PI);let c=i;if(c<0&&(c+=2*Math.PI),!(n>=l&&n<=c)){let t=Math.atan2(s-200,r-200);r=200+Math.cos(t)*(140-e.radius),s=200+Math.sin(t)*(140-e.radius);let i=Math.cos(t),n=Math.sin(t),l=o*i+a*n;o-=2*l*i,a-=2*l*n,o*=.7,a*=.7}}else if(d<100+e.radius){let t=Math.atan2(s-200,r-200);r=200+Math.cos(t)*(100+e.radius),s=200+Math.sin(t)*(100+e.radius);let i=-Math.cos(t),n=-Math.sin(t),l=o*i+a*n;o-=2*l*i,a-=2*l*n,o*=.7,a*=.7}}else if(C(r,s)){let t=Math.sqrt((r-y)**2+(s-f)**2);if(t<=70&&t>70-e.radius){let t=Math.atan2(s-f,r-y);r=y+Math.cos(t)*(70-e.radius),s=f+Math.sin(t)*(70-e.radius);let i=Math.cos(t),n=Math.sin(t),l=o*i+a*n;o-=2*l*i,a-=2*l*n,o*=.5,a*=.5}.1>Math.abs(o)&&.1>Math.abs(a)&&(e.dissolving=!0)}else if(!S(r,s)){if(w(e.x,e.y)){let t=Math.atan2(s-200,r-200);r=200+Math.cos(t)*(140-e.radius),s=200+Math.sin(t)*(140-e.radius)}else{let t=Math.atan2(s-f,r-y);r=y+Math.cos(t)*(70-e.radius),s=f+Math.sin(t)*(70-e.radius)}o*=.5,a*=.5}if(j(r,s,e.radius)&&!c){let t=Math.atan2(s-328,r-200),i=e.radius+20;r=200+Math.cos(t)*i,s=328+Math.sin(t)*i,o*=.5,a*=.5}return g.current.forEach((i,n)=>{if(t!==n&&!e.dissolving&&!i.dissolving){let t=r-i.x,n=s-i.y,l=Math.sqrt(t*t+n*n),c=e.radius+i.radius;if(l<c&&l>0){let e=c-l;r+=t/l*(.5*e),s+=n/l*(.5*e);let d=t/l,h=n/l,p=(o-i.vx)*d+(a-i.vy)*h;if(p>0)return;let u=-1.8*p/2;o+=u*d,a+=u*h}}}),{...e,x:r,y:s,vx:o,vy:a}});e.every(e=>e.inAmpulla)&&!p&&u(!0),e.filter(e=>e.radius>0),g.current=e,s(e)},[l,p]);(0,o.useEffect)(()=>{let e=()=>{k(),P(),a.current=requestAnimationFrame(e)};return d&&e(),()=>{a.current&&cancelAnimationFrame(a.current)}},[k,d]);let E=()=>{b()},P=()=>{let e=i.current;if(!e)return;let t=e.getContext("2d");if(!t)return;t.clearRect(0,0,400,400),t.fillStyle="#87CEEB",t.beginPath(),t.arc(200,200,140,0,2*Math.PI),t.fill(),t.fillStyle="white",t.beginPath(),t.arc(200,200,100,0,2*Math.PI),t.fill(),t.fillStyle="#87CEEB",t.beginPath(),t.arc(y,f,70,0,2*Math.PI),t.fill();let n=200+140*Math.cos(m),o=200+140*Math.sin(m);t.fillStyle="#87CEEB",t.save(),t.translate(n,o),t.rotate(m),t.fillRect(-5,-15,40,30),t.restore(),t.strokeStyle="#4682B4",t.lineWidth=2,t.beginPath();let a=m-.3,r=m+.3;t.arc(200,200,140,0,a),t.stroke(),t.beginPath(),t.arc(200,200,140,r,2*Math.PI),t.stroke(),t.beginPath(),t.arc(200,200,100,0,2*Math.PI),t.stroke(),t.beginPath();let s=Math.atan2(o-f,n-y);t.arc(y,f,70,s+.4,s-.4+2*Math.PI),t.stroke();t.fillStyle="#8B4513",t.fillRect(186,309,28,38),t.strokeStyle="#654321",t.lineWidth=1.5;for(let e=0;e<10;e++){let i=186+3.111111111111111*e;t.beginPath(),t.moveTo(i,309);let n=4+2*Math.sin(.5*e);t.lineTo(i,309-n),t.stroke()}t.fillStyle="#8A2BE2",g.current.forEach(e=>{e.radius>0&&(t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fill())}),p&&(t.fillStyle="#10B981",t.beginPath(),t.arc(200,200,25,0,2*Math.PI),t.fill(),t.strokeStyle="white",t.lineWidth=3,t.beginPath(),t.moveTo(190,200),t.lineTo(197,207),t.lineTo(210,193),t.stroke(),t.fillStyle="#10B981",t.font="12px Arial",t.textAlign="center",t.fillText("Epley Complete",200,245),t.fillText("Tap to Reset",200,260)),t.fillStyle="#333",t.font="14px Arial",t.textAlign="center",t.fillText("Semicircular Canal",200,40),t.fillText("Cupula",200,367),t.fillText("Vestibule",y,f+70+15)};return(0,o.useEffect)(()=>{b()},[b]),(0,n.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"white",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,n.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,padding:"20px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white"},children:[(0,n.jsx)("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:"600"},children:"Canal Ring Simulation"}),(0,n.jsx)("button",{onClick:t,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer"},children:"← Back"})]}),(0,n.jsx)("div",{style:{marginTop:"80px",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("canvas",{ref:i,width:400,height:400,onClick:e=>{if(!p)return;let t=i.current;if(!t)return;let n=t.getBoundingClientRect();25>=Math.sqrt((e.clientX-n.left-200)**2+(e.clientY-n.top-200)**2)&&E()},style:{border:"2px solid #ddd",borderRadius:"8px",backgroundColor:"white",cursor:p?"pointer":"default"}}),(0,n.jsxs)("div",{style:{textAlign:"center",maxWidth:"300px"},children:[(0,n.jsx)("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"Tilt your device to guide particles into the vestibule. Complete the Epley maneuver by getting all particles to dissolve in the vestibule chamber."}),(0,n.jsx)("button",{onClick:b,style:{padding:"10px 20px",borderRadius:"6px",border:"none",backgroundColor:"#10b981",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginTop:"10px"},children:"Reset Particles"})]})]}):(0,n.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,n.jsx)("h3",{children:"Enable Device Orientation"}),(0,n.jsx)("p",{style:{marginBottom:"20px",color:"#666"},children:"Tilt your device to move the particles through the canal ring."}),(0,n.jsx)("button",{onClick:v,style:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#667eea",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:"Enable Orientation"})]})})]})}let v=[{title:"Posterior Canal BPPV (85-95%)",videos:[{name:"Epley Maneuver",url:"https://www.youtube.com/watch?v=9SLm76jQg3g"},{name:"Semont Maneuver",url:"https://www.youtube.com/watch?v=-omE6Vs6ZuU"}]},{title:"Horizontal Canal BPPV (5-15%)",videos:[{name:"Left Gufoni",url:"https://www.youtube.com/watch?v=3VfgHZtgx_s"},{name:"Right Gufoni",url:"https://www.youtube.com/watch?v=DgKaWSuvpRs"}]},{title:"Anterior Canal BPPV (<5%)",videos:[{name:"Deep Head Hang",url:"https://www.youtube.com/watch?v=ijyx5tVeaVo"}]}];function w(){let[e,t]=(0,o.useState)(0),[i,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),u=v[e],g={padding:"12px 24px",fontSize:"16px",fontWeight:"bold",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#667eea",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},x={...g,backgroundColor:"#d1d5db",cursor:"not-allowed",boxShadow:"none"};return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)(b,{onClose:()=>p(!1)}),(0,n.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#f4f4f9"},children:[(0,n.jsx)("div",{style:{textAlign:"center",padding:"20px 20px 0 20px"},children:(0,n.jsx)("h2",{style:{color:"#333",margin:0,paddingBottom:"10px"},children:u.title})}),(0,n.jsx)("div",{style:{flexGrow:1,minHeight:"250px"},children:(0,n.jsx)(d,{videos:u.videos},e)}),(0,n.jsxs)("div",{style:{padding:"20px",backgroundColor:"white",borderTop:"1px solid #e2e8f0"},children:[(0,n.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,n.jsx)("button",{onClick:()=>p(!0),style:{...g,backgroundColor:"#059669",boxShadow:"0 4px 15px rgba(5, 150, 105, 0.4)",fontSize:"14px",padding:"10px 20px"},children:"\uD83D\uDD2C Interactive Canal Simulation"})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,n.jsx)("button",{onClick:()=>{t(e=>Math.max(0,e-1))},disabled:0===e,style:0===e?x:g,children:"← Previous"}),(0,n.jsxs)("span",{style:{color:"#555",fontWeight:"600"},children:[e+1," / ",v.length]}),(0,n.jsx)("button",{onClick:()=>{t(e=>Math.min(e+1,v.length-1))},disabled:e===v.length-1,style:e===v.length-1?x:g,children:"Next Canal →"})]}),(0,n.jsxs)("div",{style:{padding:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[(0,n.jsxs)("div",{style:{borderBottom:"1px solid #e5e7eb",paddingBottom:"16px",marginBottom:"16px"},children:[(0,n.jsxs)("h3",{style:{color:"#1E40AF",fontSize:"16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"600",margin:0},onClick:()=>s(!i),children:[(0,n.jsx)("span",{children:"Post-Treatment Instructions"}),(0,n.jsx)(r.E.div,{animate:{rotate:i?180:0},children:(0,n.jsx)(j,{})})]}),(0,n.jsx)(a.M,{children:i&&(0,n.jsx)(r.E.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:"10px"},exit:{height:0,opacity:0,marginTop:0},style:{overflow:"hidden"},children:(0,n.jsx)("p",{style:{color:"#1D4ED8",lineHeight:1.6,fontSize:"14px",margin:0},children:"Avoid rapid head movements for 24-48 hours, may sleep with extra 1-2 pillows or elevate HOB for first night, try and avoid sleeping on affected side. No restrictions on driving or normal activities."})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{style:{color:"#1E40AF",fontSize:"16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"600",margin:0},onClick:()=>c(!l),children:[(0,n.jsx)("span",{children:"Can the dizziness come back?"}),(0,n.jsx)(r.E.div,{animate:{rotate:l?180:0},children:(0,n.jsx)(j,{})})]}),(0,n.jsx)(a.M,{children:l&&(0,n.jsxs)(r.E.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:"10px"},exit:{height:0,opacity:0,marginTop:0},style:{overflow:"hidden"},children:[(0,n.jsx)("p",{style:{color:"#1D4ED8",lineHeight:1.6,fontSize:"14px",margin:"8px 0 0 0"},children:"In the three years after treatment, the symptoms return in 30% of people who had BPPV. If this happens, you should contact your Physical Therapist. If he or she finds that the crystals are back out of place, they may perform the maneuver again. Research shows that the best treatment is the maneuver, and it can work again and again, though sometimes more quickly or more slowly."}),(0,n.jsx)("p",{style:{color:"#1D4ED8",lineHeight:1.6,fontSize:"14px",margin:"8px 0 0 0"},children:"If the dizziness comes back, the crystals may be in a different place, so your next repositioning may be different than before. You should NEVER try to put the crystals back on your own unless your therapist decides you should and shows you how. Doing so can make your problem worse."})]})})]})]})]})]})]})}function j(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"m6 9 6 6 6-6"})})}let C=[{id:"hi",name:"Head Impulse",title:"Head Impulse",peripheralFinding:"Corrective Saccade",peripheralInfo:"Indicates a peripheral vestibular lesion (e.g., vestibular neuritis).",centralFinding:"Normal Head Impulse",centralInfo:"In a patient with ongoing vertigo, a normal test is a red flag for a central cause like a stroke."},{id:"n",name:"Nystagmus",title:"Nystagmus",peripheralFinding:"Unidirectional Nystagmus",peripheralInfo:"Horizontal nystagmus that does not change direction with gaze.",centralFinding:"Direction-Changing Nystagmus",centralInfo:"Nystagmus changes direction with gaze, or is purely vertical/torsional."},{id:"ts",name:"Test of Skew",title:"Test of Skew",peripheralFinding:"No Skew Deviation",peripheralInfo:"Eyes remain aligned, which is a normal finding.",centralFinding:"Skew Deviation Present",centralInfo:"Vertical misalignment of the eyes when one is covered, suggesting a central lesion."}];function S(e){let{id:t,value:i,onChange:o}=e,a={width:"calc(50% - 10px)",height:"40px",borderRadius:"20px",backgroundColor:"white",position:"absolute",top:"5px",left:"5px",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},s="peripheral"===i,l="central"===i,c={fontWeight:600,zIndex:1,width:"50%",textAlign:"center",padding:"0 15px"};return(0,n.jsxs)("div",{style:{width:"100%",height:"50px",backgroundColor:"#e5e7eb",borderRadius:"25px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0",position:"relative",cursor:"pointer"},children:[!i&&(0,n.jsx)("div",{style:{...a,width:"40px",left:"calc(50% - 20px)",backgroundColor:"#9ca3af"}}),i&&(0,n.jsx)(r.E.div,{style:{...a,backgroundColor:s?"#34d399":l?"#f87171":"#ffffff",transform:s?"translateX(0%)":"translateX(calc(100% + 10px))"},layoutId:t}),(0,n.jsx)("div",{style:{...c,color:s?"white":"black"},onClick:()=>o("peripheral"),children:"Peripheral"}),(0,n.jsx)("div",{style:{...c,color:l?"white":"black"},onClick:()=>o("central"),children:"Central"})]})}function k(){let[e,t]=(0,o.useState)({hi:null,n:null,ts:null}),i=(e,i)=>{t(t=>({...t,[e]:i}))},a=(0,o.useMemo)(()=>{let{hi:t,n:i,ts:n}=e;return t&&i&&n?"central"===t||"central"===i||"central"===n?{title:"High Risk - Possible Stroke",text:"The presence of one or more central signs in the HINTS exam is highly suggestive of a central cause, such as a stroke. This patient requires an URGENT referral to the Emergency Department for immediate neurological evaluation and imaging.",color:"#ef4444"}:{title:"Low Risk - Likely Peripheral",text:"The combination of an abnormal Head Impulse, unidirectional Nystagmus, and no Skew Deviation points towards a peripheral cause like vestibular neuritis. The patient can be managed with supportive care and vestibular rehabilitation.",color:"#22c55e"}:{title:"Complete the exam",text:"Select a finding for each component of the HINTS exam to see the clinical implications.",color:"#6b7280"}},[e]);return(0,n.jsxs)("div",{style:{padding:"15px 10px",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#f4f4f9",maxWidth:"100%",overflow:"hidden"},children:[C.map(t=>(0,n.jsxs)("div",{style:{marginBottom:"12px",backgroundColor:"white",padding:"15px 25px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",borderRadius:"8px",maxWidth:"100%",overflow:"hidden"},children:[(0,n.jsx)("h2",{style:{textAlign:"center",color:"#333",margin:"0 0 12px 0",fontSize:"1.25rem",fontWeight:"bold"},children:t.title}),(0,n.jsx)("div",{style:{maxWidth:"100%",margin:"0 auto",marginBottom:"12px"},children:(0,n.jsx)(S,{id:t.id,value:e[t.id],onChange:e=>i(t.id,e)})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",fontSize:"13px",gap:"12px",maxWidth:"100%",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{flex:"1",textAlign:"center",color:"#4b5563",minWidth:0,padding:"0 8px"},children:[(0,n.jsx)("strong",{style:{display:"block",marginBottom:"4px"},children:t.peripheralFinding}),(0,n.jsx)("p",{style:{margin:"0",fontSize:"11px",lineHeight:"1.4",wordWrap:"break-word"},children:t.peripheralInfo})]}),(0,n.jsxs)("div",{style:{flex:"1",textAlign:"center",color:"#4b5563",minWidth:0,padding:"0 8px"},children:[(0,n.jsx)("strong",{style:{display:"block",marginBottom:"4px"},children:t.centralFinding}),(0,n.jsx)("p",{style:{margin:"0",fontSize:"11px",lineHeight:"1.4",wordWrap:"break-word"},children:t.centralInfo})]})]})]},t.id)),(0,n.jsxs)("div",{style:{marginTop:"auto",paddingTop:"10px"},children:[(0,n.jsxs)("h3",{style:{display:"flex",alignItems:"center",fontSize:"1.1rem",color:"#1f2937",margin:"0 0 8px 10px"},children:[(0,n.jsx)("input",{type:"checkbox",checked:!!e.hi||!!e.n||!!e.ts,readOnly:!0,style:{width:"18px",height:"18px",marginRight:"10px"}}),"Next Steps:"]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"15px",borderLeft:"5px solid ".concat(a.color)},children:[(0,n.jsx)("h4",{style:{margin:"0 0 8px 0",color:a.color,fontSize:"1rem",fontWeight:"bold"},children:a.title}),(0,n.jsx)("p",{style:{margin:0,color:"#4b5563",lineHeight:1.5,fontSize:"13px"},children:a.text})]})]})]})}let E=[{title:"BPPV",color:"#3B82F6",bgColor:"#EFF6FF",criteria:["Episodes of vertigo or dizziness triggered by a change in position, typically lying down or rolling onto the side from a supine position","Attacks last < 1 min","The Dix-Hallpike test produces torsional and vertical nystagmus towards the affected ear after a few seconds.[7][8]"]},{title:"Meniere disease",color:"#0891B2",bgColor:"#F0F9FF",criteria:["Two or more episodes of spontaneous vertigo lasting 30 minutes to 12 hours","Low- to medium-frequency sensorineural hearing loss","Unilateral tinnitus, ear fullness, and hearing loss in the affected ear may fluctuate [9]"]},{title:"Vestibular neuritis",color:"#059669",bgColor:"#ECFDF5",criteria:["Sudden onset of vertigo lasting at least 24 hours, often accompanied by oscillopsia, nausea, and a tendency to fall","Absence of cochlear symptoms","Absence of associated neurological symptoms and signs [10]"]},{title:"Vestibular labyrinthitis",color:"#A855F7",bgColor:"#F3E8FF",criteria:["Vestibular neuritis plus hearing loss","occurs commonly after a viral illness such as a URI or otitis media"]},{title:"Vestibular migraine",color:"#D97706",bgColor:"#FFFBEB",criteria:["Five or more episodes of vertigo or dizziness with nausea","Symptoms of moderate-severe intensity lasting 5 minutes to 72 hours.","At least 50% of the episodes should be accompanied by migraine features such as unilateral headache, photophobia, phonophobia, or aura.","Current or previous history of migraine [11]"]},{title:"Superior canal dehiscence",color:"#DC2626",bgColor:"#FEF2F2",criteria:[{heading:"At least 1 of the following symptoms",points:["Bone conduction hyperacusis","Sound or pressure-induced vertigo or oscillopsia (illusion of an unstable visual world) time-locked to the stimulus","Pulsatile tinnitus","Autophony (hearing one's internal bodily sounds loudly) [12]"]},{heading:"At least 1 of the following signs or diagnostic tests",points:["Nystagmus evoked by sound or by changes in the middle ear or intracranial pressure","Low-frequency negative bone conduction thresholds on pure tone audiometry","Low cervical Vestibular Evoked Myogenic Potential (VEMP) thresholds or high ocular VEMP amplitudes","Evidence of dehiscence of the superior semicircular canal on temporal bone CT [12]"]}]},{title:"Persistent postural-perceptual dizziness",color:"#3B82F6",bgColor:"#EFF6FF",criteria:["Dizziness, vertigo, or unsteadiness are present for 15 out of 30 days for 3 or months.","Symptoms last several hours, may wax and wane, and become worse as the day progresses","Symptoms occur without provocation but are exacerbated by Upright posture, active or passive motion, and exposure to moving visual stimuli or complex visual patterns","Symptoms cause significant functional impairment and distress [13]"]},{title:"Bilateral vestibulopathy",color:"#0891B2",bgColor:"#F0F9FF",criteria:["Disequilibrium and oscillopsia when walking or standing worsened in darkness or on uneven ground","Asymptomatic while sitting or lying down under static conditions","Reduced or absent angular vestibulo-ocular reflex function bilaterally [14]"]},{title:"Perilymphatic fistula",color:"#059669",bgColor:"#ECFDF5",criteria:["Loss of hearing (sensorineural), tinnitus, ear fullness, or dizziness following barotrauma that either","Associated with perilymph biomarker testing with high sensitivity and specificity or","Associated with the visualization of perilymph leakage in the middle ear, symptoms resolve after treatment of the leak [15]"]}];function P(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"m6 9 6 6 6-6"})})}function M(){let[e,t]=(0,o.useState)(null),i=i=>{t(e===i?null:i)};return(0,n.jsx)("div",{style:{padding:"0 20px 20px 20px",backgroundColor:"#f4f4f9"},children:E.map((t,o)=>(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsxs)(r.E.div,{style:{backgroundColor:"white",color:"#333",cursor:"pointer",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:"5px solid ".concat(t.color),boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},onClick:()=>i(o),children:[(0,n.jsx)("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:t.title}),(0,n.jsx)(r.E.div,{animate:{rotate:e===o?180:0},children:(0,n.jsx)(P,{})})]}),(0,n.jsx)(a.M,{children:e===o&&(0,n.jsx)(r.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden",backgroundColor:t.bgColor,borderLeft:"5px solid ".concat(t.color)},children:(0,n.jsx)("div",{style:{padding:"20px"},children:t.criteria.map((e,t)=>"string"==typeof e?(0,n.jsxs)("p",{style:{color:"#374151",margin:"0 0 12px 0",lineHeight:1.6},children:["• ",e]},t):(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("h4",{style:{color:"#1f2937",margin:"0 0 8px 0",fontWeight:"600"},children:[e.heading,":"]}),e.points.map((e,t)=>(0,n.jsxs)("p",{style:{color:"#374151",margin:"0 0 8px 12px",lineHeight:1.6},children:["- ",e]},t))]},t))})})})]},t.title))})}function I(e){let{options:t,value:i,onChange:o,name:a,multiSelect:r=!1}=e,s=r?i.split(",").filter(Boolean):[i],l=e=>{if(r){let t=new Set(s);t.has(e)?t.delete(e):t.add(e),o(Array.from(t).join(","))}else o(e===i?"":e)};return(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:t.map(e=>{let t="".concat(a,"-").concat(e.value.replace(/\s+/g,"-")),i=s.includes(e.value);return(0,n.jsxs)("label",{htmlFor:t,style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,n.jsx)("input",{id:t,type:r?"checkbox":"radio",name:a,checked:i,onChange:()=>l(e.value),style:{display:"none"}}),(0,n.jsx)("span",{style:{width:"16px",height:"16px",border:"1px solid ".concat(i?"#7C3AED":"#D1D5DB"),borderRadius:r?"4px":"50%",marginRight:"8px",display:"inline-block",position:"relative",backgroundColor:i?"#7C3AED":"white",transition:"all 0.2s ease"},children:i&&(r?(0,n.jsx)("span",{style:{position:"absolute",left:"5px",top:"2px",width:"4px",height:"8px",border:"solid white",borderWidth:"0 2px 2px 0",transform:"rotate(45deg)"}}):(0,n.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"white"}}))}),(0,n.jsx)("span",{style:{color:"#374151",fontSize:"0.9rem"},children:e.label})]},e.value)})})}let T=["Red Flag Screening","History of Present Illness","Hearing & Ear Health","Associated Symptoms","Oculomotor Exam","Plan of Care","Treatment Provided","Narrative Summary","Conclusion"],F=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],D=[{value:"Left",label:"Left"},{value:"Right",label:"Right"},{value:"Bilateral",label:"Bilateral"}],B=[{value:"Vertigo (spinning)",label:"Vertigo (spinning)"},{value:"Faint (light head/pass out)",label:"Faint (light head/pass out)"},{value:"Imbalance",label:"Imbalance"},{value:"Oscillopsia",label:"Oscillopsia"}],z=[{value:"seconds",label:"Seconds"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"},{value:"weeks",label:"Weeks"}],A=[{value:"Abrupt",label:"Abrupt"},{value:"Gradual",label:"Gradual"}],N=[{value:"Spontaneous",label:"Spontaneous"},{value:"Positional Changes",label:"Positional Changes"},{value:"Head Motion",label:"Head Motion"},{value:"Pressure Changes",label:"Pressure Changes"}],R=[{value:"peripheral_education",label:"Suspect peripheral vestibular cause. Patient Education on symptom management and referral to outpatient vestibular therapy services for further followup care"},{value:"peripheral_crm",label:"Suspect peripheral vestibular cause. Perform Canalith repositioning manuevers"},{value:"mixed_lifestyle",label:"Suspect peripheral/central cause. Patient Education on lifestyle modification and medication management, referral to PCP or ENT for further followup care"},{value:"central_workup",label:"Suspect central cause. Recommend further medical workup based on severity or variability in symptoms (RED Flags)"}],H=[{value:"modified_epley",label:"Modified Epley maneuver (Posterior Canal BPPV)"},{value:"gufoni_h_canalithiasis",label:"Gufoni maneuver (Horizontal Canalithiasis BPPV)"},{value:"gufoni_h_cupulolithiasis",label:"Gufoni maneuver (Horizontal Cupulolithiasis)"},{value:"deep_head_hang",label:"Deep head hang maneuver (Anterior Canalithiasis BPPV)"}],W=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"}],V=[{value:"Left",label:"Left"},{value:"Right",label:"Right"}],L=[{value:"well",label:"Well"},{value:"with difficulty/modifications",label:"With difficulty/modifications"}],O={peripheral_education:"Plan of Care: Suspect peripheral vestibular cause. Patient was educated on symptom management strategies and referred to outpatient vestibular therapy services for further follow-up care.",peripheral_crm:"Plan of Care: Suspect peripheral vestibular cause. Canalith repositioning maneuvers were performed.",mixed_lifestyle:"Plan of Care: Suspect peripheral/central cause. Patient was educated on lifestyle modifications and medication management. A referral to their Primary Care Provider or an ENT specialist will be made for further follow-up care.",central_workup:"Plan of Care: Suspect central cause. It is recommended that the patient undergoes further medical workup based on the severity and variability of their symptoms, including the presence of red flags."},_={modified_epley:{maneuver:"Modified Epley maneuver",condition:"to address posterior canal BPPV"},gufoni_h_canalithiasis:{maneuver:"Gufoni maneuver",condition:"to address horizontal canalithiasis BPPV"},gufoni_h_cupulolithiasis:{maneuver:"Gufoni maneuver",condition:"to address horizontal cupulolithiasis to convert to canalithiasis and treat remaining BPPV"},deep_head_hang:{maneuver:"Deep head hang maneuver",condition:"to address anterior canalithiasis BPPV"}},q=[{category:"Vestibular",items:["Nausea","Vomiting","Oscillopsia (visual world moving)","Unsteadiness walking"]},{category:"Neurologic",items:["Headache","Visual loss","Sensory disturbances","Hiccups","Facial numbness"]},{category:"Migraine-Associated",items:["Photophobia (light sensitivity)","Phonophobia (sound sensitivity)","Osmophobia (smell sensitivity)","Visual aura","Unilateral headache"]},{category:"Cardiovascular",items:["Chest pain","Palpitations","Shortness of breath","Fatigue","Syncope/near-syncope"]}],Y=[{id:"doubleVision",label:"Double vision"},{id:"slurredSpeech",label:"Slurred speech or trouble finding words"},{id:"difficultySwallowing",label:"Difficulty swallowing"},{id:"hiccups",label:"Uncontrollable hiccups"},{id:"weaknessOrNumbness",label:"Weakness or numbness on one side"},{id:"incoordination",label:"Incoordination"},{id:"lostConsciousness",label:"Loss of consciousness"},{id:"chestPain",label:"Chest Pain"},{id:"syncopalEpisode",label:"Syncopal Episode"}],G=[{id:"spontaneousNystagmus",label:"Spontaneous Nystagmus",options:["None","Horizontal","Vertical","Torsional"]},{id:"gazeEvokedNystagmus",label:"Gaze-Evoked Nystagmus",options:["None","Direction-Fixed (Peripheral)","Direction-Changing (Central)"]},{id:"saccadicEyeMovements",label:"Saccadic Eye Movements",options:["Normal","Hypermetric (Overshoot)","Hypometric (Undershoot)"]},{id:"vorCancellation",label:"VOR Cancellation",options:["Normal","Impaired (Corrective Saccades)"]},{id:"headImpulseTest",label:"Head Impulse Test (HIT)",options:["Normal","Abnormal (Corrective Saccade)"]},{id:"testOfSkew",label:"Test of Skew",options:["Negative","Positive (Vertical Realignment)"]}];function U(){let[e,t]=(0,o.useState)(0),[i,s]=(0,o.useState)({redFlags:{doubleVision:!1,slurredSpeech:!1,difficultySwallowing:!1,hiccups:!1,weaknessOrNumbness:!1,incoordination:!1,lostConsciousness:!1,chestPain:!1,syncopalEpisode:!1},hearingChanges:"",hearingLoss:"",hearingSide:"",tinnitus:"",tinnitusType:"",tinnitusGradual:"",audiogram:"",earFullness:"",earFullnessSide:"",mri:!1,ctScan:!1,smoke:"",drink:"",onsetDate:"",onsetType:"",activity:"",symptomType:"",trigger:"",worseWith:[],episodeDuration:"",episodeDurationSpecific:"",spontaneousVsTriggered:"",dixHallpikeResult:"",orthostaticVitals:"",associatedSymptoms:[],oscillopsia:!1,tendencyToFall:!1,nausea:!1,vomiting:!1,orthostaticBP:"",chestPainDetails:"",palpitations:!1,boneConduction:!1,soundInducedVertigo:!1,pulsatileTinnitus:!1,autophony:!1,barotrauma:!1,viralIllness:!1,functionalImpairment:"",visualStimuli:!1,darknessWorse:!1,unevenGroundWorse:!1,planOfCare:"",treatmentManeuver:"",treatmentRepetitions:"1",treatmentSide:"",treatmentTolerance:"",chartId:"",oculomotorExam:{spontaneousNystagmus:"",gazeEvokedNystagmus:"",saccadicEyeMovements:"",vorCancellation:"",headImpulseTest:"",testOfSkew:""}}),[l,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),[p,u]=(0,o.useState)(!1),[g,x]=(0,o.useState)("idle"),m=()=>Math.random().toString(36).substring(2,8).toUpperCase(),y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n?s(i=>({...i,[n]:{...i[n],[e]:t}})):s(i=>({...i,[e]:t})),"planOfCare"!==e||i.chartId||s(e=>({...e,chartId:m()}))},f=(e,t,i)=>{s(n=>{let o=n[e]||[];return i?{...n,[e]:[...o,t]}:{...n,[e]:o.filter(e=>e!==t)}})},b=()=>{let{redFlags:e,onsetType:t,symptomType:n,trigger:o,episodeDuration:a,hearingChanges:r,hearingLoss:s,hearingSide:l,tinnitus:c,tinnitusType:d,earFullness:h,associatedSymptoms:p,oculomotorExam:u,planOfCare:g,treatmentManeuver:x,treatmentRepetitions:m,treatmentSide:y,treatmentTolerance:f}=i,b="Patient presenting with complaints of ";t?b+="".concat(t.toLowerCase()," onset of "):b+="(onset type) ",n?b+="".concat(n.split(",").join(", ").toLowerCase(),". "):b+="(type of symptoms). ",o?b+="These symptoms are triggered by ".concat(o.split(",").join(", ").toLowerCase()," "):b+="These symptoms are triggered by (trigger) ",a?b+="and last for ".concat(a.toLowerCase(),"."):b+="and last for (episode duration).";let v={doubleVision:"double vision",slurredSpeech:"slurred speech or trouble finding words",difficultySwallowing:"difficulty swallowing",hiccups:"uncontrollable hiccups",weaknessOrNumbness:"weakness or numbness on one side",incoordination:"incoordination",lostConsciousness:"loss of consciousness",chestPain:"chest pain",syncopalEpisode:"syncopal episode"},w=Object.entries(e).filter(e=>{let[,t]=e;return!0===t}).map(e=>{let[t]=e;return v[t]});b+="\n\n",0===w.length?b+="Patient screening completed for neurologic and cardiovascular red flags, no concerns reported.":b+="Patient screened for neurologic and cardiovascular red flags and reports the following concerning symptoms that will require further medical evaluation: "+w.join(", ")+".",b+="\n\n","No"===r?b+="Patient denies any changes to hearing, denies tinnitus, denies aural fullness/pressure and reports that ear health is generally good.":"Yes"===r&&(b+="Patient reports the following ear related symptoms:\n","Yes"===s?b+="- Hearing Loss: Yes, on the ".concat(l.toLowerCase()," side.\n"):"No"===s&&(b+="- Hearing Loss: No.\n"),c&&"None"!==c?(b+="- Tinnitus: Yes, on the ".concat(c.toLowerCase()," side."),d?b+=" Character: ".concat(d.toLowerCase(),".\n"):b+="\n"):"None"===c&&(b+="- Tinnitus: No.\n"),h&&"None"!==h?b+="- Ear Fullness/Pressure: Yes, on the ".concat(h.toLowerCase()," side.\n"):"None"===h&&(b+="- Ear Fullness/Pressure: No.\n"));let j=["Nausea","Vomiting","Oscillopsia (visual world moving)","Unsteadiness walking"].filter(e=>p.includes(e)),C=["Headache","Visual loss","Sensory disturbances","Hiccups","Facial numbness"].filter(e=>p.includes(e)),S=["Photophobia (light sensitivity)","Phonophobia (sound sensitivity)","Osmophobia (smell sensitivity)","Visual aura","Unilateral headache"].filter(e=>p.includes(e)),k=["Chest pain","Palpitations","Shortness of breath","Fatigue","Syncope/near-syncope"].filter(e=>p.includes(e));p.length>0&&(b+="\n\nAssociated Symptoms:\n",j.length>0&&(b+="- Vestibular: ".concat(j.join(", "),"\n")),C.length>0&&(b+="- Neurologic: ".concat(C.join(", "),"\n")),S.length>0&&(b+="- Migraine-Associated: ".concat(S.join(", "),"\n")),k.length>0&&(b+="- Cardiovascular: ".concat(k.join(", "),"\n")));let E=[{label:"Spontaneous Nystagmus",value:u.spontaneousNystagmus},{label:"Gaze-Evoked Nystagmus",value:u.gazeEvokedNystagmus},{label:"Saccadic Eye Movements",value:u.saccadicEyeMovements},{label:"VOR Cancellation",value:u.vorCancellation},{label:"Head Impulse Test (HIT)",value:u.headImpulseTest},{label:"Test of Skew Deviation",value:u.testOfSkew}].filter(e=>e.value);if(E.length>0&&(b+="\n\nOculomotor Exam Findings:\n",E.forEach(e=>{b+="- ".concat(e.label,": ").concat(e.value,"\n")})),g&&O[g]&&(b+="\n\n".concat(O[g])),"peripheral_crm"===g&&x&&_[x]){let{maneuver:e,condition:t}=_[x];b+="\n\nTreatment Provided: ".concat(e," completed x").concat(m," for the ").concat(y.toLowerCase()," ear ").concat(t,". Patient tolerated treatment ").concat(f,".")}return b},v={backgroundColor:"#fff",border:"1px solid #E2E8F0",padding:"24px",marginBottom:"24px"},w={fontWeight:"600",color:"#334155",marginBottom:"10px",display:"block"},j={display:"flex",alignItems:"center",marginBottom:"12px",cursor:"pointer"},C={marginRight:"10px",height:"20px",width:"20px"},S={width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #D1D5DB",backgroundColor:"white",fontSize:"1rem"},k={padding:"15px 20px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"background-color 0.2s"},E=async()=>{if(i.chartId){u(!0),x("idle");try{let e=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chartId:i.chartId,narrative:b()})}),t=await e.json();e.ok?x("success"):(console.error("Failed to save note:",t.error),x("error"))}catch(e){console.error("Error saving note:",e),x("error")}finally{u(!1)}}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{position:"relative",height:"4px",backgroundColor:"#e2e8f0",marginBottom:"25px",borderRadius:"2px"},children:(0,n.jsx)(r.E.div,{style:{position:"absolute",height:"100%",backgroundColor:"#2D3748",borderRadius:"2px"},animate:{width:"".concat(e/(T.length-1)*100,"%")},transition:{ease:"easeInOut",duration:.5}})}),(0,n.jsx)(a.M,{mode:"wait",children:(0,n.jsxs)(r.E.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{duration:.3},children:[(0,n.jsx)("h2",{style:{color:"#1e293b",marginBottom:"20px"},children:T[e]}),0===e&&(0,n.jsx)("div",{style:v,children:Y.map(e=>(0,n.jsxs)("label",{style:j,children:[(0,n.jsx)("input",{type:"checkbox",style:C,checked:i.redFlags[e.id],onChange:t=>y(e.id,t.target.checked,"redFlags")}),(0,n.jsx)("span",{children:e.label})]},e.id))}),1===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Symptom Onset"}),(0,n.jsx)(I,{name:"onsetType",options:A,value:i.onsetType,onChange:e=>y("onsetType",e)})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Primary Symptom Type"}),(0,n.jsx)(I,{name:"symptomType",options:B,value:i.symptomType,onChange:e=>y("symptomType",e),multiSelect:!0})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Symptom Trigger"}),(0,n.jsx)(I,{name:"trigger",options:N,value:i.trigger,onChange:e=>y("trigger",e),multiSelect:!0})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Episode Duration"}),(0,n.jsx)(I,{name:"episodeDuration",options:z,value:i.episodeDuration,onChange:e=>y("episodeDuration",e)})]})]}),2===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Any changes to your hearing?"}),(0,n.jsx)(I,{name:"hearingChanges",options:F,value:i.hearingChanges,onChange:e=>y("hearingChanges",e)})]}),"Yes"===i.hearingChanges&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Do you have hearing loss?"}),(0,n.jsx)(I,{name:"hearingLoss",options:F,value:i.hearingLoss,onChange:e=>y("hearingLoss",e)}),"Yes"===i.hearingLoss&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginTop:"20px"},children:[(0,n.jsx)("label",{style:w,children:"Which side?"}),(0,n.jsx)(I,{name:"hearingSide",options:D,value:i.hearingSide,onChange:e=>y("hearingSide",e)})]})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Do you have tinnitus (ringing in ears)?"}),(0,n.jsx)(I,{name:"tinnitus",options:D.concat({value:"None",label:"None"}),value:i.tinnitus,onChange:e=>y("tinnitus",e)})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Do you have ear fullness/pressure?"}),(0,n.jsx)(I,{name:"earFullness",options:D.concat({value:"None",label:"None"}),value:i.earFullness,onChange:e=>y("earFullness",e)})]})]})]}),3===e&&(0,n.jsx)("div",{children:q.map(e=>{let{category:t,items:o}=e;return(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("h3",{style:{...w,fontSize:"1.1rem"},children:t}),o.map(e=>(0,n.jsxs)("label",{style:j,children:[(0,n.jsx)("input",{type:"checkbox",style:C,checked:i.associatedSymptoms.includes(e),onChange:t=>f("associatedSymptoms",e,t.target.checked)}),(0,n.jsx)("span",{children:e})]},e))]},t)})}),4===e&&(0,n.jsx)("div",{children:G.map(e=>(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:e.label}),(0,n.jsx)("select",{style:S,value:i.oculomotorExam[e.id],onChange:t=>y(e.id,t.target.value,"oculomotorExam"),children:e.options.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]},e.id))}),5===e&&(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("h3",{style:{...w,fontSize:"1.1rem"},children:"Plan of Care"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:R.map(e=>(0,n.jsxs)("label",{style:{...j,alignItems:"flex-start"},children:[(0,n.jsx)("input",{type:"radio",name:"planOfCare",value:e.value,checked:i.planOfCare===e.value,onChange:e=>y("planOfCare",e.target.value),style:{...C,marginTop:"5px"}}),(0,n.jsx)("span",{children:e.label})]},e.value))})]}),6===e&&"peripheral_crm"===i.planOfCare&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Treatment Maneuver"}),(0,n.jsx)(I,{name:"treatmentManeuver",options:H,value:i.treatmentManeuver,onChange:e=>y("treatmentManeuver",e)})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Repetitions"}),(0,n.jsx)(I,{name:"treatmentRepetitions",options:W,value:i.treatmentRepetitions,onChange:e=>y("treatmentRepetitions",e)})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Side"}),(0,n.jsx)(I,{name:"treatmentSide",options:V,value:i.treatmentSide,onChange:e=>y("treatmentSide",e)})]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("label",{style:w,children:"Patient Tolerance"}),(0,n.jsx)(I,{name:"treatmentTolerance",options:L,value:i.treatmentTolerance,onChange:e=>y("treatmentTolerance",e)})]})]}),7===e&&(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("h3",{style:{...w,fontSize:"1.1rem"},children:"Narrative Summary"}),i.chartId&&(0,n.jsxs)("p",{style:{fontWeight:"bold",marginBottom:"10px"},children:["Chart ID: ",i.chartId]}),(0,n.jsx)("textarea",{readOnly:!0,value:b(),style:{width:"100%",height:"400px",padding:"10px",border:"1px solid #ccc",resize:"none"}})]}),8===e&&(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)("h3",{style:{...w,fontSize:"1.1rem"},children:"Conclusion"}),i.chartId&&(0,n.jsxs)("p",{style:{fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:["Chart ID: ",i.chartId]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,n.jsx)("button",{onClick:E,style:{...k,backgroundColor:p?"#f56565":"#2D3748",color:"white"},children:p?"Saving...":"Save My Note"}),(0,n.jsx)("button",{onClick:()=>{if(l){window.speechSynthesis.cancel(),c(!1);return}let e=b(),t=new SpeechSynthesisUtterance(e);t.onend=()=>c(!1),window.speechSynthesis.speak(t),c(!0)},style:{...k,backgroundColor:l?"#f56565":"#2D3748",color:"white"},children:l?"Stop":"Hear My Note"}),(0,n.jsx)("button",{onClick:()=>{let e=b();navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)},style:{...k,backgroundColor:d?"#48bb78":"#2D3748",color:"white"},children:d?"Copied!":"Copy My Note to Clipboard"})]}),"success"===g&&(0,n.jsxs)("div",{style:{marginTop:"15px",padding:"12px",backgroundColor:"#F0FFF4",border:"1px solid #68D391",borderRadius:"8px",color:"#2F855A",textAlign:"center"},children:["✅ Your chart note has been saved! It will be available for 24 hours using ID: ",(0,n.jsx)("strong",{children:i.chartId})]}),"error"===g&&(0,n.jsx)("div",{style:{marginTop:"15px",padding:"12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"8px",color:"#DC2626",textAlign:"center"},children:"❌ Failed to save chart note. Please try again or copy the note manually."})]})]},e)}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"30px"},children:[(0,n.jsx)("button",{onClick:()=>{7===e&&"peripheral_crm"!==i.planOfCare?t(5):t(e=>Math.max(e-1,0))},disabled:0===e,style:{...k,backgroundColor:0===e?"#d1d5db":"#667eea",color:"white",cursor:0===e?"not-allowed":"pointer",boxShadow:0===e?"none":"0 4px 15px rgba(102, 126, 234, 0.4)"},children:"Back"}),(0,n.jsx)("button",{onClick:()=>{5===e&&"peripheral_crm"!==i.planOfCare?t(7):7===e?(i.chartId||s(e=>({...e,chartId:m()})),t(e=>Math.min(e+1,T.length-1))):t(e=>Math.min(e+1,T.length-1))},disabled:e===T.length-1,style:{...k,backgroundColor:e===T.length-1?"#d1d5db":"#667eea",color:"white",cursor:e===T.length-1?"not-allowed":"pointer",boxShadow:e===T.length-1?"none":"0 4px 15px rgba(102, 126, 234, 0.4)"},children:"Next"})]})]})}function Z(){return(0,n.jsx)("div",{style:{textAlign:"center",color:"#1A202C"},children:(0,n.jsxs)("div",{style:{marginTop:"15px"},children:[(0,n.jsx)("p",{style:{fontWeight:900,fontSize:"1.8rem",margin:0,letterSpacing:"0.02em"},children:"DIZZY"}),(0,n.jsx)("p",{style:{fontWeight:500,fontSize:"1.8rem",margin:0,letterSpacing:"0.02em"},children:"DASHBOARD"})]})})}function X(e){let{onDismiss:t}=e,[i,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=setTimeout(()=>{s(!0)},500);return()=>clearTimeout(e)},[]),(0,n.jsxs)(r.E.div,{exit:{opacity:0},transition:{duration:.5},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#f7fafc",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e3},children:[(0,n.jsx)(r.E.div,{animate:{y:i?-120:0},transition:{type:"spring",stiffness:100,damping:20},children:(0,n.jsx)(Z,{})}),(0,n.jsx)(a.M,{children:i&&(0,n.jsx)(r.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0},transition:{type:"spring",stiffness:100,damping:20},style:{position:"absolute",textAlign:"center"},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"40px",borderRadius:"20px",maxWidth:"500px",margin:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{marginBottom:"20px",color:"#1A202C"},children:"Disclaimer"}),(0,n.jsx)("p",{style:{marginBottom:"30px",color:"#4A5568",lineHeight:"1.6"},children:"The following application is intended for educational and training purposes only. Vestibular assessment, diagnosis of condition and appropriate care require considerable thought and training from licensed clinicians. All conclusions drawn from use of this app must first consider clinical judgment and patient safety. By continuing you confirm that you have read the above statement and are in agreement."}),(0,n.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,style:{padding:"12px 30px",borderRadius:"10px",border:"none",backgroundColor:"#2D3748",color:"white",fontSize:"16px",cursor:"pointer"},children:"I Understand and Agree"})]})})})]},"splash")}function K(e){let{onStartEval:t,onFindChart:i}=e,o={display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"20px",fontSize:"1.2rem",fontWeight:"600",borderRadius:"12px",border:"none",cursor:"pointer",marginBottom:"20px",transition:"transform 0.2s"};return(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px"},children:[(0,n.jsx)(r.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,style:{...o,backgroundColor:"#2D3748",color:"white"},children:"Start an Eval"}),(0,n.jsx)(r.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,style:{...o,backgroundColor:"#E2E8F0",color:"#2D3748"},children:"Find my chart note"})]})}function Q(e){let{onBack:t}=e,[i,a]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(""),[u,g]=(0,o.useState)(!1),x=async()=>{if(6!==i.length){p("Please enter a valid 6-digit ID.");return}p(""),d(!0),l("");try{let e=await fetch("/api/notes/".concat(i)),t=await e.json();e.ok?l(t.narrative):p(t.error||"Failed to retrieve chart note.")}catch(e){p("Network error. Please try again.")}finally{d(!1)}},m={padding:"12px 20px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s"};return(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsx)("button",{onClick:t,style:{...m,backgroundColor:"#E2E8F0",color:"#2D3748",alignSelf:"flex-start",marginBottom:"20px"},children:"← Back"}),(0,n.jsxs)("div",{style:{backgroundColor:"#fff",padding:"40px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",width:"100%",border:"1px solid #E2E8F0"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1A202C",marginBottom:"8px",textAlign:"center"},children:"Find My Chart Note"}),(0,n.jsx)("p",{style:{color:"#718096",textAlign:"center",marginBottom:"30px",lineHeight:"1.5"},children:"Enter your 6-digit ID to retrieve your chart note. Notes are available for 24 hours after creation."}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#2D3748"},children:"Chart ID"}),(0,n.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value.toUpperCase()),onKeyPress:e=>{"Enter"===e.key&&x()},maxLength:6,placeholder:"Enter 6-digit ID",style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",outline:"none",transition:"border-color 0.2s",textAlign:"center",fontFamily:"monospace",fontSize:"1.2rem",letterSpacing:"0.1em"}})]}),h&&(0,n.jsx)("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",color:"#DC2626",padding:"12px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:h}),(0,n.jsx)("button",{onClick:x,disabled:c||6!==i.length,style:{...m,backgroundColor:c||6!==i.length?"#CBD5E0":"#2D3748",color:"white",width:"100%",marginBottom:"20px"},children:c?"Retrieving...":"Retrieve Chart Note"}),s&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{marginTop:"20px",padding:"20px",backgroundColor:"#F7FAFC",border:"1px solid #E2E8F0",borderRadius:"8px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsx)("h3",{style:{fontSize:"1.2rem",fontWeight:"600",color:"#2D3748",margin:0},children:"Your Chart Note"}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s),g(!0),setTimeout(()=>g(!1),2e3)},style:{...m,backgroundColor:u?"#48BB78":"#2D3748",color:"white",padding:"8px 16px",fontSize:"0.9rem"},children:u?"Copied!":"Copy"})]}),(0,n.jsx)("textarea",{readOnly:!0,value:s,style:{width:"100%",minHeight:"300px",padding:"15px",border:"1px solid #CBD5E0",borderRadius:"6px",resize:"vertical",fontFamily:"inherit",fontSize:"0.95rem",lineHeight:"1.6",backgroundColor:"white"}})]})]})]})}function J(){let[e,t]=(0,o.useState)("questionnaire"),[i,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[d,h]=(0,o.useState)("splash"),[b,v]=(0,o.useState)(!1),[j,C]=(0,o.useState)(0);(0,o.useEffect)(()=>{let e=()=>{s(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let S=[{id:"questionnaire",label:"Eval",icon:(0,n.jsx)(g,{})},{id:"oculomotor",label:"Oculomotor",icon:(0,n.jsx)(x,{})},{id:"hints",label:"HINTS",icon:(0,n.jsx)(m,{})},{id:"diagnosticCriteria",label:"Diagnostics",icon:(0,n.jsx)(y,{})},{id:"maneuvers",label:"Maneuvers",icon:(0,n.jsx)(f,{})}],E={backgroundColor:"white",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.15)",position:"relative",zIndex:0,flex:1};return"eval"===d?(E.overflowY="auto","oculomotor"!==e&&"maneuvers"!==e?E.padding=i?"20px 20px 90px 20px":"32px 32px 90px 32px":E.paddingBottom="90px"):E.overflowY="hidden",(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{background:"#f7fafc",height:"100vh",display:"flex",flexDirection:"column"},children:[(0,n.jsx)("div",{style:{color:"#1A202C",padding:i?"20px 10px":"30px 20px",textAlign:"center",borderBottom:"1px solid #e2e8f0"},children:(0,n.jsxs)("div",{onClick:()=>{"eval"===d?v(!0):h("options")},style:{fontWeight:700,fontSize:i?"1.5rem":"1.8rem",letterSpacing:"0.02em",color:"#1A202C",cursor:"pointer",userSelect:"none"},children:[(0,n.jsx)("span",{style:{fontWeight:900},children:"DIZZY"}),(0,n.jsx)("span",{style:{fontWeight:500},children:"DASHBOARD"})]})}),(0,n.jsx)("div",{style:{...E},children:(0,n.jsxs)(a.M,{mode:"wait",children:["splash"===d&&(0,n.jsx)(X,{onDismiss:()=>{document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(e=>{console.error("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}),h("options")}},"splash"),"options"===d&&(0,n.jsx)(K,{onStartEval:()=>{h("eval")},onFindChart:()=>{h("find-chart")}},"options"),"eval"===d&&(0,n.jsx)(r.E.div,{children:(0,n.jsxs)(a.M,{initial:!1,custom:l,mode:"wait",children:["questionnaire"===e&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,n.jsx)(U,{},j)},"questionnaire"),"oculomotor"===e&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{height:"100%"},children:(0,n.jsx)(p,{})},"oculomotor"),"hints"===e&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{height:"100%"},children:(0,n.jsx)(k,{})},"hints"),"diagnosticCriteria"===e&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,n.jsx)(M,{})},"diagnosticCriteria"),"maneuvers"===e&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{height:"100%"},children:(0,n.jsx)(w,{})},"maneuvers")]})},"eval-content"),"find-chart"===d&&(0,n.jsx)(Q,{onBack:()=>{h("options")}},"find-chart")]})})]}),"eval"===d&&(0,n.jsx)(u,{tabs:S,activeTab:e,setActiveTab:t}),b&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},children:(0,n.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:{backgroundColor:"white",padding:"30px",borderRadius:"12px",maxWidth:"400px",margin:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)",textAlign:"center"},children:[(0,n.jsx)("h3",{style:{color:"#1A202C",marginBottom:"15px",fontSize:"1.2rem",fontWeight:"600"},children:"Reset Evaluation?"}),(0,n.jsx)("p",{style:{color:"#4A5568",marginBottom:"25px",lineHeight:"1.5"},children:"This will clear all your current answers and return you to the main menu. This action cannot be undone."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,n.jsx)("button",{onClick:()=>{v(!1)},style:{padding:"12px 24px",borderRadius:"8px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#4A5568",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{v(!1),t("questionnaire"),C(e=>e+1),h("options")},style:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#667eea",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:"Reset Evaluation"})]})]})})]})}i(1934)},1934:function(){}},function(e){e.O(0,[66,971,69,744],function(){return e(e.s=7775)}),_N_E=e.O()}]);